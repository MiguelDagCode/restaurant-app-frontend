<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary">ğŸ“‹ GestiÃ³n de Pedidos</h2>
    <button class="btn btn-success shadow-sm" (click)="abrirModalCrear()">â• Nuevo Pedido</button>
  </div>

  <table class="table table-striped table-hover shadow-sm rounded">
    <thead class="table-dark">
      <tr class="text-center">
        <th>ID</th>
        <th>Mozo</th>
        <th>Fecha</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let pedido of pedidos" class="align-middle text-center">
        <td>{{ pedido.id }}</td>
        <td>{{ pedido.mozo.nombres }} {{ pedido.mozo.apellidos }}</td>
        <td>{{ pedido.fecha | date: 'short' }}</td>
        <td>
<span
  class="badge"
  [ngClass]="{
    'bg-success': pedido.estado === EstadoPedido.LISTO,
    'bg-warning text-dark': pedido.estado === EstadoPedido.EN_PROCESO,
    'bg-danger': pedido.estado === EstadoPedido.PAGADO
  }"
>
  {{ pedido.estado }}
</span>
        </td>
        <td>
          <button class="btn btn-warning btn-sm me-2" (click)="abrirModalEditar(pedido)">
            âœï¸ Editar
          </button>
          <button class="btn btn-danger btn-sm" (click)="eliminarPedido(pedido)">
            ğŸ—‘ï¸ Eliminar
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- ğŸŒŸ Modal Crear -->
<div class="modal-backdrop fade-in" *ngIf="mostrarModalCrear">
  <div class="modal-card p-4 bg-white rounded shadow-lg">
    <h5 class="fw-bold text-center mb-3 text-success">â• Nuevo Pedido</h5>

    <div class="mb-3">
      <label class="form-label">Fecha:</label>
      <input class="form-control" [(ngModel)]="nuevoPedido.fecha" type="date" />
    </div>

    <div class="mb-3">
      <label class="form-label">Estado:</label>
      <select class="form-select" [(ngModel)]="nuevoPedido.estado">
        <option *ngFor="let estado of (EstadoPedido | keyvalue)" [value]="estado.key">
          {{ estado.key }}
        </option>
      </select>
    </div>

    <div class="text-end">
      <button class="btn btn-secondary me-2" (click)="cerrarModales()">Cancelar</button>
      <button class="btn btn-success" (click)="crearPedido()">Guardar</button>
    </div>
  </div>
</div>

<!-- âœï¸ Modal Editar -->
<div class="modal-backdrop fade-in" *ngIf="mostrarModalEditar">
  <div class="modal-card p-4 bg-white rounded shadow-lg">
    <h5 class="fw-bold text-center mb-3 text-primary">âœï¸ Editar Pedido</h5>

    <div class="mb-3">
      <label class="form-label">Estado:</label>
      <select class="form-select" [(ngModel)]="pedidoEditado.estado">
        <option *ngFor="let estado of (EstadoPedido | keyvalue)" [value]="estado.key">
          {{ estado.key }}
        </option>
      </select>
    </div>

    <div class="text-end">
      <button class="btn btn-secondary me-2" (click)="cerrarModales()">Cancelar</button>
      <button class="btn btn-primary" (click)="guardarCambios()">Guardar cambios</button>
    </div>
  </div>
</div>

