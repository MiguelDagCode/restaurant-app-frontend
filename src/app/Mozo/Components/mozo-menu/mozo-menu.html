<main class="min-vh-100 bg-light-gray">
  
  <header class="navbar navbar-expand-lg bg-white border-bottom shadow-sm px-4 py-3">
    <div class="container-fluid">
      <div class="d-flex align-items-center gap-2">
         <img src="/assets/logo.png" alt="DeliFast Logo" style="height: 40px; width: auto;">
        <span class="badge bg-orange-light text-orange rounded-pill px-3 py-1 fw-semibold ms-2" style="font-size: 0.8rem;">
          Mozo
        </span>
      </div>

      <div class="d-flex align-items-center gap-4">
        <span class="text-muted small fw-medium d-none d-md-block">{{ usuarioEmail }}</span>
        <button (click)="logout()" class="btn btn-link text-muted text-decoration-none p-0 fw-medium d-flex align-items-center hover-orange transition-colors">
          <i class="bi bi-box-arrow-right me-2 fs-5"></i> Salir
        </button>
      </div>
    </div>
  </header>

  <div class="container py-5">
    
    <div class="mb-5">
      <h1 class="fw-bold text-dark mb-1">Mapa de Mesas</h1>
      <p class="text-muted">Selecciona una mesa para iniciar la atenciÃ³n</p>
      
      <div class="d-flex gap-4 mt-4">
        <div class="d-flex align-items-center gap-2">
          <span class="legend-dot border border-2 border-secondary rounded-circle"></span>
          <span class="text-muted small fw-medium">Libre</span>
        </div>
        <div class="d-flex align-items-center gap-2">
          <span class="legend-dot border border-2 border-orange rounded-circle"></span>
          <span class="text-muted small fw-medium">Ocupada</span>
        </div>
      </div>
    </div>

    <div *ngIf="cargando" class="text-center my-5">
      <div class="spinner-border text-orange" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="text-muted mt-3">Cargando mesas del restaurante...</p>
    </div>

    <div class="row g-4" *ngIf="!cargando">
      <div class="col-12 col-md-6 col-lg-4" *ngFor="let mesa of mesas">
        
        <article class="card h-100 table-card text-center border-2 rounded-4 cursor-pointer"
                 [ngClass]="(mesa.estado === 'OCUPADA' || mesa.estado === 'POR_PAGAR') ? 'border-orange shadow-sm bg-orange-50' : 'border-light shadow-sm bg-white'"
                 (click)="seleccionarMesa(mesa)"
                 [attr.aria-label]="'Mesa ' + mesa.numeroMesa + ', ' + mesa.estado">
          
          <div class="card-body py-5 d-flex flex-column align-items-center justify-content-center">
            
            <div class="mb-3" [ngClass]="(mesa.estado === 'OCUPADA' || mesa.estado === 'POR_PAGAR') ? 'text-orange' : 'text-muted-icon'">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
                <path d="M7 2v20"/>
                <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
                <line x1="16" y1="2" x2="16" y2="2"/>
                <line x1="4" y1="20" x2="20" y2="4" stroke-opacity="0.3"/> 
              </svg>
            </div>

            <h3 class="fw-bold fs-4 mb-1" [ngClass]="(mesa.estado === 'OCUPADA' || mesa.estado === 'POR_PAGAR') ? 'text-dark' : 'text-dark'">
              Mesa {{ mesa.numeroMesa }}
            </h3>
            
            <span class="text-muted small fw-medium">{{ mesa.capacidad }} asientos</span>
            
          </div>
        </article>
      </div>
    </div>

  </div>
</main>